digitaloceanApiTokenSecret:
  name: staging-digitalocean-dns-api-key
  key: api-token
  namespace: cert-manager

certificate:
  name: rriv-staging-org-cert
  secretName: rriv-staging-org-tls
  dnsNames:
    - 'staging.rriv.org'
    - '*.staging.rriv.org'
  issuerRef:
    name: letsencrypt
    kind: ClusterIssuer

clusterIssuer:
  server: https://acme-v02.api.letsencrypt.org/directory
  email: staging@rriv.org
  privateKeySecretRef:
    name: letsencrypt-account-key
  digitalocean:
    apiTokenSecretRef:
      name: staging-digitalocean-dns-api-key
      key: api-token

externalSecret:
  secretStoreRef:
    name: cluster-secret-store
    namespace: external-secrets
    kind: ClusterSecretStore
    vault:
      server: https://vault-staging.rriv.org:8200
      path: "secret"
      version: v2
  doApiKey:
    name: staging-digitalocean-dns-api-key
    namespace: cert-manager
    data:
      secretKey: api-token
      remoteRef:
        key: secret/staging-digitalocean-dns-api-key
        property: api-token
  timescaleCreds:
    name: staging-timescale-creds
    namespace: default
    data:
      secretKey: database_url
      remoteRef:
        key: secret/staging-timescale-creds
        property: database_url

ingress:
  secretName: rriv-staging-org-tls
  hosts:
    keycloak: auth.staging.rriv.org
    vault: vault.staging.rriv.org
    chirpstack: chirp.staging.rriv.org
    chirpstackConsole: console-chirp.staging.rriv.org
    dataApi: api.staging.rriv.org
    webfinger: auth.staging.rriv.org

ingress-nginx:
  controller:
    enabled: true
    publishService:
      enabled: true
    service:
      type: LoadBalancer
      annotations:
        service.beta.kubernetes.io/do-loadbalancer-name: "ingress-nginx-controller-staging"